<%- model_class = User -%>
<% if current_user && (current_user.is_admin? || current_user.is_superadmin?) %>
  <div class="page-header">
    <h1>Benutzer</h1>
  </div>
    <%= link_to t('.new', :default => t("helpers.links.new")), new_user_form_path, :class => 'btn btn-primary btn-smart' %>
    <hr/>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Benutzername</th>
          <th>Rolle</th>
          <th>E-Mail</th>
          <th>Unternehmen</th>
          <th><%=t '.actions', :default => t("helpers.actions") %></th>
        </tr>
      </thead>
      <tbody>
        <% @users.each do |registered_user| %>
          <tr>
            <td><%= registered_user.username %></td>
            <td><%= registered_user.role %></td>
            <td><%= registered_user.email %></td>
            <% if registered_user.company %>
              <td><%= registered_user.company.name %></td>
            <% else %>
              <td>-</td>
            <% end %>
            <td>
              <%= link_to 'Anzeigen', registered_user_path(registered_user), :class => 'btn btn-info btn-xs' %>
              <% if (current_user.is_admin?  && !(registered_user.role == "superadmin")) || (current_user.is_superadmin?) %>
                <%= link_to 'Bearbeiten', edit_user_form_path(registered_user), :class => 'btn btn-warning btn-xs' %>
              <% end %>
              <% if (current_user.is_admin? && !(registered_user.role == "admin") && !(registered_user.role == "superadmin")) || (current_user.is_superadmin? && !(registered_user.role == "superadmin"))   %>
                <%= link_to 'LÃ¶schen', registered_user_path(registered_user ), method: :delete, data: { confirm: t('helpers.links.confirm') }, :class => 'btn btn-danger btn-xs' %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>

<% else %>
  ZUGANG VERWEIGERT
<% end %>
