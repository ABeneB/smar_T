<%- model_class = Vehicle -%>
<% if current_user %>
    <% if current_user.is_admin? || current_user.is_planer?%>
      <div class="page-header">
        <h1>Fahrzeuge</h1>
      </div>
      <% if current_user.company.nil? %>
        <div class="alert alert-info">Ihrem Benutzeraccount wurde noch kein Unternehmen zugewiesen. Sie k√∂nnen daher kein Fahrzeug anlegen.</div>
      <% elsif !current_user.company.drivers.any? %>
        <div class="alert alert-info">Es wurden noch keine Fahrer angelegt.</div>
      <% else %>
        <%= link_to t('.new', :default => t("helpers.links.new")), new_vehicle_path, :class => 'btn btn-primary btn-smart' %>
        <hr/>
        <table class="table table-striped">
          <thead>
            <tr>
              <th><%= model_class.human_attribute_name(:position) %></th>
              <th class="center"><%= model_class.human_attribute_name(:capacity) %></th>
              <th><%= model_class.human_attribute_name(:driver) %></th>
              <th><%=t '.actions', :default => t("helpers.actions") %></th>
            </tr>
          </thead>
          <tbody>
            <% @vehicles.each do |vehicle| %>
              <tr>
                <td><%= vehicle.position %></td>
                <td class="center"><%= vehicle.capacity %></td>
                <td><%= (Driver.where(id: vehicle.driver_id).first).name %></td>
                <td>
                  <%= link_to t('helpers.links.show'), vehicle, :class => 'btn btn-info btn-xs' %>
                  <%= link_to t('helpers.links.edit'), edit_vehicle_path(vehicle), :class => 'btn btn-warning btn-xs' %>
                  <%= link_to t('helpers.links.destroy'), vehicle, method: :delete, data: { confirm: t('helpers.links.confirm') }, :class => 'btn btn-danger btn-xs' %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>

      <% end %>
    <% else %>
    ZUGANG VERWEIGERT
    <% end %>
<% else %>
ZUGANG VERWEIGERT
<% end %>
